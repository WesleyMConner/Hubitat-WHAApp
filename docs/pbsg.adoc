// cSpell:words dflt
= Pushbutton Switch Group (PBSG)

== At-a-Glance
* *PBSG* is a headless version of *Pushbutton Switch Group*.
** No client input is required; so, a stand-alone application would be overkill.
** Event subscriptions are required; so, a device driver would be insufficient.
* *PBSG* instances exist within a *Hubitat App* (application).
** The recommended naming convention for instances is `pbsg-*`.
** Instance state is preserved in the host App as `state[pbsg-*]`.
** Instances are constructed with `createPBSG()` and destroyed with `deletePBSG()`.
** Instance methods are written as static _Groovy closures_ then bound to
each instance.

.Abandoned
----
String showSwitchInfoWithState(
  String delimiter = ', ',
  DevWL devices = null  // settings.swGroup is only available in fn body ?!
) {
  if (!devices) devices = settings.swGroup
  return devices.collect({
    "${getDeviceInfo(it)} ${emphasizeOn(extractSwitchState(it))}"
  }).sort().join(delimiter) ?: 'N/A'
}

void logSettingsAndState(String calledBy) {
  if (settings.log) log.trace """logSettingsAndState() from ${calledBy}:<br/>
    <table>
      <tr>
        <th align='right'>LOG:</th>
        <td>${settings.log}</td>
      </tr>
      <tr>
        <th align='right'>swGroupName:</th>
        <td>${settings.swGroupName}</td>
      </tr>
      <tr>
        <th align='right'>Switch State:</th>
        <td>${showSwitchInfoWithState(', ')}</td>
      </tr>
      <tr>
        <th align='right'>Default Switch:</th>
        <td>${settings.useDefault
                ? getDeviceInfo(getSwitchById(settings.dfltSwitchNameId))
                : 'N/A'
            }
        </td>
      </tr>
    </table>
  """
}
----
